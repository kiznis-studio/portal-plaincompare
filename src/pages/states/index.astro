---
import Base from '../../layouts/Base.astro';
import { getAllStates } from '../../lib/db';

const db = Astro.locals.runtime.env.DB;
const states = await getAllStates(db);
---

<Base
  title="Browse All States"
  description={`Browse all ${states.length} U.S. states and territories available for comparison on PlainCompare.`}
  breadcrumbs={[{ name: 'Home', href: '/' }, { name: 'States' }]}
>
  <section class="max-w-4xl mx-auto px-4 py-8">
    <div class="mb-2 text-sm text-[var(--color-text-secondary)]">
      <a href="/" class="hover:text-[var(--color-primary)]">Home</a> /
    </div>
    <h1 class="text-2xl md:text-3xl font-bold mb-2">States & Territories</h1>
    <p class="text-[var(--color-text-secondary)] mb-8">{states.length} states available for 7-dimension comparison.</p>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3">
      {states.map(s => (
        <a href={`/search?q=${encodeURIComponent(s.name)}&type=state`} class="flex items-center justify-between px-4 py-3 rounded-lg border border-[var(--color-border)] hover:border-[var(--color-primary)] hover:bg-[var(--color-surface)] transition-colors">
          <span class="font-medium text-sm">{s.name}</span>
          <span class="text-xs text-[var(--color-text-secondary)]">{s.abbr}</span>
        </a>
      ))}
    </div>
  </section>
</Base>
